PRAGMA foreign_keys = ON
üìä –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY,
            telegram_id INTEGER UNIQUE NOT NULL,
            username TEXT,
            first_name TEXT,
            last_name TEXT,
            phone_number TEXT,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    
CREATE TABLE IF NOT EXISTS orders (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER NOT NULL,
            order_number TEXT UNIQUE NOT NULL,
            status TEXT DEFAULT 'new',
            total_amount REAL NOT NULL,
            promo_code TEXT,
            discount_amount REAL DEFAULT 0,
            notes TEXT,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (user_id) REFERENCES users(id)
        )
    
CREATE TABLE IF NOT EXISTS order_items (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            order_id INTEGER NOT NULL,
            product_id INTEGER NOT NULL,
            product_name TEXT NOT NULL,
            product_price REAL NOT NULL,
            quantity INTEGER NOT NULL,
            subtotal REAL NOT NULL,
            FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE
        )
    
CREATE TABLE IF NOT EXISTS promo_codes (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            code TEXT UNIQUE NOT NULL,
            discount_type TEXT NOT NULL,
            discount_value REAL NOT NULL,
            min_order_amount REAL DEFAULT 0,
            max_uses INTEGER,
            used_count INTEGER DEFAULT 0,
            expires_at DATETIME,
            is_active BOOLEAN DEFAULT 1,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    
CREATE TABLE IF NOT EXISTS promo_usage (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            promo_code_id INTEGER NOT NULL,
            user_id INTEGER NOT NULL,
            order_id INTEGER NOT NULL,
            used_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (promo_code_id) REFERENCES promo_codes(id),
            FOREIGN KEY (user_id) REFERENCES users(id),
            FOREIGN KEY (order_id) REFERENCES orders(id)
        )
    
CREATE INDEX IF NOT EXISTS idx_orders_user_id ON orders(user_id);
CREATE INDEX IF NOT EXISTS idx_orders_status ON orders(status);
CREATE INDEX IF NOT EXISTS idx_orders_created_at ON orders(created_at);
CREATE INDEX IF NOT EXISTS idx_order_items_order_id ON order_items(order_id);
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!
üåê –í–µ–±-—Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3000
üì± Web App URL: https://unimmaculately-unogled-savanna.ngrok-free.dev -> http://localhost:3000
üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: Rate limiting, CORS, Headers, Validation ‚úì
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
[2025-11-19T10:33:58.953Z] –û—à–∏–±–∫–∞ polling: EFATAL
Reading products from: /Users/nxdms/Desktop/techbot/public/products.json
Loaded products count: 5
Returning products count: 5
[2025-11-19T12:44:03.544Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:44:10.949Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:44:18.330Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:44:25.705Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:44:33.066Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:44:40.499Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:44:47.905Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:44:55.258Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:45:02.685Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:45:10.038Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:45:17.406Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:45:24.795Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:45:32.223Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:45:39.817Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:45:47.161Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:45:54.544Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:46:02.089Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:46:09.554Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:46:17.564Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:46:24.909Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:46:32.259Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:46:39.674Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:46:46.998Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:46:54.403Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:47:01.795Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:47:09.369Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:47:17.114Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:47:24.680Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:47:32.009Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:47:39.308Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:47:46.637Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:47:56.438Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:48:04.947Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:48:13.045Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:48:21.112Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:48:29.192Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:48:37.216Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:48:45.374Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:48:53.496Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:49:01.617Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:49:09.710Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:49:17.921Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:49:26.025Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:49:34.277Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:49:42.337Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:49:50.581Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:49:58.755Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:50:06.771Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:50:14.807Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:50:22.961Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:50:31.000Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:50:39.390Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:50:47.401Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:50:55.436Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:51:03.470Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:51:11.629Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:51:19.630Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:51:27.616Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:51:35.611Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:51:43.621Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:51:51.731Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:51:59.726Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:52:07.748Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:52:15.827Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:52:24.152Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:52:32.151Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:52:40.156Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:52:48.151Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:52:56.146Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:59:38.768Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:59:46.817Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T12:59:54.940Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:00:03.373Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:00:11.349Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:00:19.343Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:00:27.321Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:00:35.371Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:00:43.356Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:00:51.372Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:00:59.366Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:01:07.458Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:01:15.628Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:01:23.621Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:01:32.076Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:01:40.781Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:01:48.766Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:01:56.750Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:02:04.726Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:02:12.704Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:02:20.692Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:02:28.735Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:02:36.738Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:02:44.728Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:02:52.743Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
[2025-11-19T13:03:00.717Z] –û—à–∏–±–∫–∞ polling: ETELEGRAM
